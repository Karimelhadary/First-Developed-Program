<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{{ 'Edit Task' if editing else 'Add Task' }} — Task Management System</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='addtask.css') }}">
</head>
<body>

<header>
  <a href="{{ url_for('dashboard_bp.dashboard') }}" class="back">← Dashboard</a>
  <h2>{{ 'Edit Task' if editing else 'Add New Task' }}</h2>
</header>

<main class="container">
  <form class="task-form" method="POST">

    <label>Title
      <input type="text" name="title" required 
             value="{{ task.title if editing else '' }}">
    </label>

    <label>Description
      <textarea name="description">{{ task.description if editing else '' }}</textarea>
    </label>

    <label>Due Date
      <input type="date" name="due_date" required
             value="{{ task.due_date if editing else '' }}">
    </label>

    <label>Importance
      <select name="importance">
        <option {{ 'selected' if editing and task.importance=='Low' }}>Low</option>
        <option {{ 'selected' if editing and task.importance=='Medium' }}>Medium</option>
        <option {{ 'selected' if editing and task.importance=='High' }}>High</option>
      </select>
    </label>

    <label>Complexity
      <input type="range" name="complexity" min="1" max="5"
             value="{{ task.complexity if editing else '1' }}">
    </label>

    <label>Energy Needed
      <input type="range" name="energy" min="1" max="5"
             value="{{ task.energy if editing else '1' }}">
    </label>

    <div class="actions">
      <a href="{{ url_for('tasks_bp.task_list') }}" class="btn ghost">Cancel</a>
      <button class="btn primary" type="submit">
        {{ 'Update Task' if editing else 'Add Task' }}
      </button>
    </div>
  </form>
</main>

<script src="{{ url_for('static', filename='addtask.js') }}"></script>

</body>
</html>
